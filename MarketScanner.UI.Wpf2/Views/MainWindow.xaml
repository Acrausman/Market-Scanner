<Window x:Class="MarketScanner.UI.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:oxy="http://oxyplot.org/wpf"
        Title="Market Scanner"
        Height="900" Width="1600"
        Background="#1E1E1E">

    <Grid Margin="10">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="300"/>
            <!-- Console -->
            <ColumnDefinition Width="*"/>
            <!-- Charts -->
            <ColumnDefinition Width="400"/>
            <!-- Controls -->
        </Grid.ColumnDefinitions>

        <!-- 🔹 Console Output -->
        <Border Grid.Column="0" Background="#111111" Padding="8" CornerRadius="6">
            <DockPanel>
                <TextBlock Text="Console Output" Foreground="LightGray"
                           FontWeight="Bold" DockPanel.Dock="Top" Margin="0,0,0,6"/>
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <TextBox Text="{Binding ConsoleText, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                             FontFamily="Consolas"
                             FontSize="12"
                             Foreground="LightGreen"
                             Background="#111111"
                             IsReadOnly="True"
                             TextWrapping="Wrap"
                             AcceptsReturn="True"
                             VerticalScrollBarVisibility="Auto"/>
                </ScrollViewer>
            </DockPanel>
        </Border>

        <!-- 🔹 Chart Section -->
        <StackPanel Grid.Column="1" Orientation="Vertical" Background="#1E1E1E" Margin="10,0">
            <oxy:PlotView Model="{Binding ChartManager.PriceView}" Height="300"/>
            <oxy:PlotView Model="{Binding ChartManager.RsiView}" Height="200"/>
            <oxy:PlotView Model="{Binding ChartManager.VolumeView}" Height="200"/>

            <StackPanel Orientation="Horizontal" Margin="10,10,0,0">
                <TextBlock Text="{Binding Chart.PriceText}" FontWeight="Bold" Margin="5,0" Foreground="White"/>
                <TextBlock Text="{Binding Chart.SmaText}" Margin="5,0" Foreground="White"/>
                <TextBlock Text="{Binding Chart.RsiText}" Margin="5,0" Foreground="White"/>
                <TextBlock Text="{Binding Chart.VolumeText}" Margin="5,0" Foreground="White"/>
            </StackPanel>
        </StackPanel>

        <!-- 🔹 Controls -->
        <Border Grid.Column="2" Background="#252526" Padding="12" CornerRadius="6">
            <StackPanel>
                <TextBlock Text="Market Scanner" Foreground="White" FontSize="16" FontWeight="Bold" Margin="0,0,0,8"/>

                <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                    <Button Content="Start Scan" Command="{Binding StartScanCommand}"
                            Width="100" Margin="0,0,6,0"/>
                    <Button Content="Stop Scan" Command="{Binding StopScanCommand}"
                            Width="100"/>
                </StackPanel>

                <ProgressBar Minimum="0" Maximum="100"
             Value="{Binding Scanner.ProgressValue, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
             Height="18" Margin="0,4,0,0"/>

                <TextBlock Text="{Binding StatusText}" Foreground="White" Margin="0,4,0,10"/>

                <Separator Margin="0,10,0,10"/>

                <TextBlock Text="Overbought (RSI &gt; 70)"
                           Foreground="#FFAAAA" FontWeight="Bold" Margin="0,4,0,4"/>
                <ListBox ItemsSource="{Binding Scanner.OverboughtSymbols}"
                         SelectedItem="{Binding Scanner.SelectedSymbol, Mode=TwoWay}"
                         SelectionMode="Single"
                         Background="#2D2D30" Foreground="White"
                         Height="150" BorderThickness="0" FontSize="13">
                    <ListBox.ItemContainerStyle>
                        <Style TargetType="ListBoxItem">
                            <Setter Property="Foreground" Value="White"/>
                            <Style.Triggers>
                                <Trigger Property="IsSelected" Value="True">
                                    <Setter Property="Background" Value="#3A3A3A"/>
                                    <Setter Property="FontWeight" Value="Bold"/>
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </ListBox.ItemContainerStyle>
                </ListBox>

                <TextBlock Text="Oversold (RSI &lt; 30)"
                           Foreground="#A0FFA0" FontWeight="Bold" Margin="10,10,0,4"/>
                <ListBox ItemsSource="{Binding Scanner.OversoldSymbols}"
                         SelectedItem="{Binding Scanner.SelectedSymbol, Mode=TwoWay}"
                         SelectionMode="Single"
                         Background="#2D2D30" Foreground="White"
                         Height="150" BorderThickness="0" FontSize="13">
                    <ListBox.ItemContainerStyle>
                        <Style TargetType="ListBoxItem">
                            <Setter Property="Foreground" Value="White"/>
                            <Style.Triggers>
                                <Trigger Property="IsSelected" Value="True">
                                    <Setter Property="Background" Value="#3A3A3A"/>
                                    <Setter Property="FontWeight" Value="Bold"/>
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </ListBox.ItemContainerStyle>
                </ListBox>

                <Separator Margin="0,10,0,10"/>

                <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                    <Ellipse Width="12" Height="12" Fill="#00FF00" Stroke="White" StrokeThickness="1" Margin="0,0,6,0"/>
                    <TextBlock Text="{Binding StatusText}" Foreground="White" FontWeight="Bold" VerticalAlignment="Center"/>
                </StackPanel>
            </StackPanel>
        </Border>
    </Grid>
</Window>
