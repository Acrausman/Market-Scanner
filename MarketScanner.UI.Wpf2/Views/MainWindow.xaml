<Window x:Class="MarketScanner.UI.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:oxy="http://oxyplot.org/wpf"
        Title="Market Scanner" Height="800" Width="1200">

    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="2*" />
            <!-- Price chart -->
            <RowDefinition Height="*" />
            <!-- RSI chart -->
            <RowDefinition Height="*" />
            <!-- Volume chart -->
            <RowDefinition Height="Auto"/>
            <!-- Text values -->
            <RowDefinition Height="2*"/>
            <!-- ListBox -->
        </Grid.RowDefinitions>

        <!-- Price chart -->
        <oxy:PlotView Grid.Row="0" Model="{Binding PriceView}" />

        <!-- RSI chart -->
        <oxy:PlotView Grid.Row="1" Model="{Binding RsiView}" />

        <!-- Volume chart -->
        <oxy:PlotView Grid.Row="2" Model="{Binding VolumeView}" />

        <!-- Text values -->
        <StackPanel Grid.Row="3" Orientation="Horizontal" Margin="0,10,0,0">
            <TextBlock Text="{Binding PriceText}" FontSize="16" FontWeight="Bold" Margin="0,0,20,0"/>
            <TextBlock Text="{Binding RsiText}" FontSize="16" FontWeight="Bold" Margin="0,0,20,0"/>
            <TextBlock Text="{Binding VolumeText}" FontSize="16" FontWeight="Bold" Margin="0,0,20,0"/>
            <TextBlock Text="{Binding SmaText}" FontSize="16" FontWeight="Bold"/>
        </StackPanel>

        <!-- RSI color coding -->
        <TextBlock Grid.Row="3" Text="{Binding RsiText}" FontSize="16" FontWeight="Bold" Margin="0,40,20,0">
            <TextBlock.Style>
                <Style TargetType="TextBlock">
                    <Setter Property="Foreground" Value="Black"/>
                    <Style.Triggers>
                        <!-- RSI >= 70 = Overbought (Red) -->
                        <DataTrigger Binding="{Binding RsiValue}" Value="70">
                            <Setter Property="Foreground" Value="Red"/>
                        </DataTrigger>
                        <!-- RSI <= 30 = Oversold (Green) -->
                        <DataTrigger Binding="{Binding RsiValue}" Value="30">
                            <Setter Property="Foreground" Value="Green"/>
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </TextBlock.Style>
        </TextBlock>

        <!-- List of scanned symbols -->
        <ListBox Grid.Row="4" ItemsSource="{Binding Symbols}" Margin="10">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Horizontal" Margin="2">
                        <TextBlock Text="{Binding Symbol}" Width="60"/>
                        <TextBlock Text="{Binding Price, StringFormat=C}" Width="80"/>
                        <TextBlock Text="{Binding RSI, StringFormat=F2}" Width="50"/>
                        <TextBlock Text="{Binding SMA, StringFormat=F2}" Width="50"/>
                        <TextBlock Text="{Binding Volume, StringFormat=N0}" Width="80"/>
                    </StackPanel>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>
    </Grid>
</Window>
